{"ast":null,"code":"var _jsxFileName = \"/Users/patrice/dev/pictureapp/client/src/GlobalProvider.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nconst MyContext = React.createContext();\n\nclass GlobalProvider extends Component {\n  constructor() {\n    super();\n\n    this.signup = userInfo => {\n      //userInfo is an object with username and pass fields\n      return axios.post(\"/auth/signup\", userInfo).then(response => {\n        const {\n          user,\n          token\n        } = response.data;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        this.setState({\n          user,\n          token\n        });\n        return response;\n      });\n    };\n\n    this.login = credentials => {\n      return axios.post(\"/auth/login\", credentials).then(response => {\n        const {\n          token,\n          user\n        } = response.data;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n      });\n    };\n\n    this.login = credentials => {\n      return axios.post(\"/auth/login\", credentials).then(response => {\n        const {\n          token,\n          user\n        } = response.data;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        this.setState({\n          user,\n          token\n        });\n        return response;\n      });\n    };\n\n    this.saveImg = imginfo => {\n      return axios.post(\"/auth/loggedin\", imginfo).then(response => {\n        this.setState({\n          imgs: imginfo\n        });\n        return response;\n      });\n    };\n\n    this.logout = () => {\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      this.setState({\n        todos: [],\n        user: {},\n        token: \"\"\n      });\n    };\n\n    this.setSearchWordProp = newValue => {\n      this.setState({\n        searchword: newValue\n      });\n    };\n\n    this.state = {\n      imgs: [],\n      searchword: '',\n      user: JSON.parse(localStorage.getItem(\"user\")) || {},\n      token: localStorage.getItem(\"token\") || \"\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(MyContext.Provider, {\n      value: { ...this.state,\n        signup: this.signup,\n        login: this.login,\n        logout: this.logout,\n        saveImg: this.saveImg,\n        setSearchWordProp: this.setSearchWordProp\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, this.props.children);\n  }\n\n}\n\nexport default GlobalProvider;\nexport const withProvider = C => props => /*#__PURE__*/React.createElement(MyContext.Consumer, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }\n}, value => /*#__PURE__*/React.createElement(C, Object.assign({}, value, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 19\n  }\n})));","map":{"version":3,"sources":["/Users/patrice/dev/pictureapp/client/src/GlobalProvider.js"],"names":["React","Component","axios","MyContext","createContext","GlobalProvider","constructor","signup","userInfo","post","then","response","user","token","data","localStorage","setItem","JSON","stringify","setState","login","credentials","saveImg","imginfo","imgs","logout","removeItem","todos","setSearchWordProp","newValue","searchword","state","parse","getItem","render","props","children","withProvider","C","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\n\nconst MyContext = React.createContext();\n\nclass GlobalProvider extends Component {\n    constructor() {\n        super()\n        this.state = {\n            imgs: [],\n            searchword: '',\n            user: JSON.parse(localStorage.getItem(\"user\")) || {},\n            token: localStorage.getItem(\"token\") || \"\"\n        }\n    }\n\n    \n    signup = userInfo => {\n        //userInfo is an object with username and pass fields\n         return axios.post(\"/auth/signup\", userInfo)\n            .then(response => {\n                const { user, token } = response.data\n                localStorage.setItem(\"token\", token);\n                localStorage.setItem(\"user\", JSON.stringify(user));\n                this.setState({\n                    user,\n                    token\n                });\n                return response;\n        });   \n    }\n\n    login = (credentials) => {\n        return axios.post(\"/auth/login\", credentials)\n            .then(response => {\n                const { token, user } = response.data;\n                localStorage.setItem(\"token\", token);\n                localStorage.setItem(\"user\", JSON.stringify(user));\n            })\n    }\n\n    login = credentials => {\n        return axios.post(\"/auth/login\", credentials)\n            .then(response => {\n                const { token, user } = response.data;\n                localStorage.setItem(\"token\", token)\n                localStorage.setItem(\"user\", JSON.stringify(user))\n                this.setState({\n                    user,\n                    token\n                });\n                \n                return response;\n            })\n    }\n\n    saveImg = imginfo => {\n        return axios.post(\"/auth/loggedin\", imginfo)\n            .then(response => {\n                this.setState({\n                    imgs : imginfo\n                });\n                return response;\n            })\n    }\n    \n    logout = () => {\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"token\");\n        this.setState({\n            todos: [],\n            user: {},\n            token: \"\"\n        })\n    }\n\n    setSearchWordProp = newValue => {\n        this.setState({searchword:newValue});\n\n    }\n    \n    render() {\n        return (\n            <MyContext.Provider\n                value={{\n                    ...this.state,\n                    signup: this.signup,\n                    login: this.login, \n                    logout: this.logout,\n                    saveImg: this.saveImg,\n                    setSearchWordProp:this.setSearchWordProp\n                }}\n            >\n                {this.props.children}\n            </MyContext.Provider>\n        )\n    }\n}\n \nexport default GlobalProvider;\n\nexport const withProvider = C => props => (\n    <MyContext.Consumer>\n        {value => <C {...value} {...props} /> }\n    </MyContext.Consumer>\n)"]},"metadata":{},"sourceType":"module"}